<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сообщество - SpacePoint</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="community.css">
    <link rel="stylesheet" href="../sidebar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="../flow.ico">
</head>
<body>
    <!-- Боковое меню -->
    <nav class="sidebar">
        <button class="sidebar-toggle">
            <i class="fas fa-chevron-right"></i>
        </button>
        <div class="sidebar-logo">
            <img src="../flow.ico" alt="Logo" class="sidebar-icon">
        </div>
        <div class="sidebar-nav">
            <a href="../profile/profile.html" class="sidebar-link">
                <i class="fas fa-user"></i>
                <span>Профиль</span>
            </a>
            <a href="../lenta/lenta.html" class="sidebar-link">
                <i class="fas fa-stream"></i>
                <span>Лента</span>
            </a>
            <a href="../games/games.html" class="sidebar-link">
                <i class="fas fa-gamepad"></i>
                <span>Игры</span>
            </a>
            <a href="../about/about.html" class="sidebar-link">
                <i class="fas fa-info-circle"></i>
                <span>О нас</span>
            </a>
        </div>
        <div class="theme-switch-wrapper">
            <div class="theme-toggle-container">
                <input type="checkbox" class="theme-checkbox" id="theme-toggle" hidden>
                <label class="theme-label" for="theme-toggle">
                    <div class="theme-icons">
                        <i class="fas fa-sun theme-icon sun-icon"></i>
                        <i class="fas fa-moon theme-icon moon-icon"></i>
                    </div>
                </label>
            </div>
        </div>
    </nav>

    <!-- Основной контент -->
    <div class="community-layout">
        <!-- Сайдбар с информацией о сообществе -->
        <aside class="community-sidebar">
            <div class="community-card">
                <div class="community-header">
                    <div class="community-avatar-wrapper">
                        <img src="{{ community.avatar }}" alt="Community avatar" class="community-avatar">
                        {% if is_admin %}
                        <div class="avatar-overlay">
                            <i class="icon-camera"></i>
                        </div>
                        {% endif %}
                    </div>
                    <h1 class="community-name">{{ community.name }}</h1>
                    <p class="community-description">{{ community.description }}</p>
                </div>

                <div class="community-info">
                    <div class="info-row">
                        <span class="info-label">Подписчики</span>
                        <span class="info-value" data-type="followers">{{ community.followers_count }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Публикации</span>
                        <span class="info-value" data-type="posts">{{ community.posts_count }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Создано</span>
                        <span class="info-value">{{ community.created_at|date }}</span>
                    </div>
                    
                    {% if not is_member %}
                    <button class="btn btn-primary btn-full">Подписаться</button>
                    {% else %}
                    <button class="btn btn-secondary btn-full">Отписаться</button>
                    {% endif %}
                </div>
            </div>
        </aside>

        <!-- Основной контент с постами -->
        <main class="posts-container">
            {% for post in posts %}
            <article class="post-card">
                <div class="post-header">
                    <div class="post-meta">
                        <img src="{{ post.author.avatar }}" alt="Author avatar" class="post-author-avatar">
                        <div class="post-info">
                            <span class="post-author">{{ post.author.name }}</span>
                            <span class="post-date">{{ post.created_at|date }}</span>
                        </div>
                    </div>
                </div>
                <div class="post-content">
                    <p>{{ post.content }}</p>
                    {% if post.image %}
                    <img src="{{ post.image }}" alt="Post image" class="post-image">
                    {% endif %}
                </div>
                <div class="post-actions">
                    <button class="btn-icon"><i class="icon-like"></i> {{ post.likes_count }}</button>
                    <button class="btn-icon"><i class="icon-comment"></i> {{ post.comments_count }}</button>
                    <button class="btn-icon"><i class="icon-share"></i></button>
                </div>
            </article>
            {% endfor %}
        </main>
    </div>

    <script src="community.js"></script>
    <script src="../sidebar.js"></script>
</body>
</html> 